<!DOCTYPE html>
<html>
<head>
	<title>Starlist</title>
	<meta http-equiv="content-type" content="text/html">
	<meta charset="utf-8">

	<link href='https://fonts.googleapis.com/css?family=Noto Sans' rel='stylesheet'>
	<link rel="stylesheet" href="public/lower.css">

</head>
<body>
	<main>
		<div class="wrapper">

			<div class="veil">
				<div id="BACK_1" class="bkgr anim bkgr-0"></div>
				<div id="NAME_1" class="text anim text-0"></div>
				<div id="TIME_1" class="numb anim numb-0"></div>
			</div>
			
			<div class="veil">
				<div id="BACK_2" class="bkgr anim bkgr-0"></div>
				<div id="NAME_2" class="text anim text-0"></div>
				<div id="TIME_2" class="numb anim numb-0"></div>
			</div>

			<div class="veil">
				<div id="BACK_3" class="bkgr anim bkgr-0"></div>
				<div id="NAME_3" class="text anim text-0"></div>
				<div id="TIME_3" class="numb anim numb-0"></div>
			</div>

			<div class="veil">
				<div id="BACK_4" class="bkgr anim bkgr-0"></div>
				<div id="NAME_4" class="text anim text-0"></div>
				<div id="TIME_4" class="numb anim numb-0"></div>
			</div>

			<div class="veil">
				<div id="BACK_5" class="bkgr anim bkgr-0"></div>
				<div id="NAME_5" class="text anim text-0"></div>
				<div id="TIME_5" class="numb anim numb-0"></div>
			</div>
		</div>
	</main>
</body>

<script>

	const dataReplicant = nodecg.Replicant("../../futebol/graphics/startlist.html", 'main');

	const elems = document.body.getElementsByClassName("anim");

	dataReplicant.on('change', (newValue, oldValue) => {

		newValue.data.forEach(function (element) {

			Object.keys(element).forEach(function (atribute){
				
				if (atribute == 'id') {
				}

				else if (atribute == "value")
					document.getElementById(element.id).innerHTML = element[atribute];

				else
					document.getElementById(element.id).setAttribute(atribute, element[atribute]);
			});

			for (let i = 0; i < elems.length; i++) {

				let classes = elems[i].className;
				let mainClass = classes.split(' ')[0];
				let oldState = classes.split(' ')[2];
				let newState = mainClass + '-' + newValue.template.command;

				elems[i].classList.replace(oldState, newState);
			};
		});
	});
</script>
</html>